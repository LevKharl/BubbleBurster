<!DOCTYPE html>
<html lang="en">
<!-- [Head] start -->
<head>
  @@include('../layouts/head-page-meta.html', {'title': 'Top Issues - Well-being Dashboard'})
  @@include('../layouts/head-css.html')
  <link rel="stylesheet" href="../assets/css/plugins/jsvectormap.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/apexcharts/3.19.3/apexcharts.min.css">
  <style>

    .container {
      max-width: 1200px;
      margin: auto;
      padding: 20px;
    }
    .header-section {
      text-align: center;
      margin-bottom: 40px;
    }
    .header-section h2 {
      font-weight: 700;
      font-size: 2.5em;
      color: #2b2b2b;
      margin: 0;
    }
    .header-section p {
      color: #6c757d;
      font-size: 1.1em;
      margin-top: 10px;
    }
    .issue-card {
      background: #ffffff;
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 20px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      transition: transform 0.2s;
    }
    .issue-card:hover {
      transform: translateY(-5px);
    }
    .issue-card h5 {
      font-size: 1.5em;
      font-weight: 700;
      color: #dc3545;
      margin: 0;
    }
    .issue-card p {
      color: #6c757d;
      font-size: 1em;
      margin: 5px 0 0;
    }
    .chart-section {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      margin-top: 20px;
    }
    .chart-card {
      flex: 1;
      background: #ffffff;
      border-radius: 12px;
      padding: 20px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
      transition: transform 0.2s;
      min-width: 300px;
    }
    .chart-card:hover {
      transform: translateY(-5px);
    }
    .chart-card h5 {
      font-size: 1.2em;
      color: #2b2b2b;
      font-weight: 500;
      margin-bottom: 15px;
      text-align: center;
    }
    .icon {
      font-size: 1.2em;
      color: #ffc107;
    }
    .filter-section {
      display: flex;
      gap: 10px;
      justify-content: space-between;
      flex-wrap: wrap;
      margin-bottom: 30px;
    }
    .filter-section select,
    .filter-section input {
      padding: 8px;
      border-radius: 8px;
      border: 1px solid #ccc;
      width: 100%;
      max-width: 200px;
    }
    .pagination {
      display: flex;
      justify-content: center;
      margin-top: 20px;
      gap: 10px;
    }
    .pagination a {
      padding: 8px 12px;
      border-radius: 6px;
      border: 1px solid #007bff;
      color: #007bff;
      text-decoration: none;
    }
    .pagination a.active {
      background-color: #007bff;
      color: #fff;
    }
    .pagination a:hover {
      background-color: #0056b3;
      color: #fff;
    }
  </style>
</head>
<!-- [Head] end -->
<!-- [Body] Start -->
<body @@bodySetup>
  @@include('../layouts/layout-vertical.html') <!-- Adds the menu bar -->

  <div class="pc-container">
    <div class="pc-content">
      <div class="container">
        
        <!-- Header Section -->
        <div class="header-section">
          <h2>Top Issues in the Company</h2>
          <p>An overview of the most critical issues affecting the companyâ€™s well-being and productivity.</p>
        </div>

        <!-- Filter Section -->
        <div class="filter-section">
          <select id="department-filter">
            <option value="all">All Departments</option>
            <option value="engineering">Engineering</option>
            <option value="sales">Sales</option>
            <option value="marketing">Marketing</option>
            <option value="hr">HR</option>
            <option value="it">IT</option>
          </select>
          <select id="issue-type-filter">
            <option value="all">All Issue Types</option>
            <option value="burnout">Burnout</option>
            <option value="feedback">Feedback Response</option>
            <option value="stress">Stress</option>
            <option value="collaboration">Collaboration</option>
          </select>
          <input type="text" id="search" placeholder="Search issues...">
        </div>

        <!-- Top 3 Issues -->
        <div class="issue-card">
          <h5><i class="icon">&#9888;</i> High Employee Burnout Rate</h5>
          <p>Burnout levels are reaching critical thresholds in several departments, especially in Engineering and Sales teams.</p>
        </div>
        <div class="issue-card">
          <h5><i class="icon">&#9888;</i> Low Feedback Response Rate</h5>
          <p>Feedback collection has been challenging, with a response rate below 50% in Marketing and HR.</p>
        </div>
        <div class="issue-card">
          <h5><i class="icon">&#9888;</i> High Stress Levels in Sales</h5>
          <p>Stress levels in the Sales department have been consistently high, impacting performance and morale.</p>
        </div>

        <!-- Paginated Issues List (Other Issues) -->
        <div id="issues-list">
          <!-- Dynamically loaded list of other issues based on pagination and filters -->
          <!-- Example Issue -->
          <div class="issue-card">
            <h5><i class="icon">&#9888;</i> Low Team Collaboration in Marketing</h5>
            <p>Interpersonal collaboration has been low, affecting project delivery timelines and quality.</p>
          </div>
          <!-- Repeat for more issues -->
        </div>

        <!-- Pagination -->
        <div class="pagination">
          <a href="#" class="active">1</a>
          <a href="#">2</a>
          <a href="#">3</a>
          <!-- Add more pages as needed -->
        </div>

        <!-- Chart Section -->
        <div class="chart-section">
          <div class="chart-card">
            <h5>Burnout Levels by Department</h5>
            <div id="burnout-level-chart" style="height: 250px;"></div>
          </div>
          <div class="chart-card">
            <h5>Feedback Response Rate by Department</h5>
            <div id="feedback-response-chart" style="height: 250px;"></div>
          </div>
          <div class="chart-card">
            <h5>Stress Levels in Sales</h5>
            <div id="stress-sales-chart" style="height: 250px;"></div>
          </div>
          <div class="chart-card">
            <h5>Collaboration in Marketing</h5>
            <div id="collaboration-marketing-chart" style="height: 250px;"></div>
          </div>
        </div>

      </div>
    </div>
  </div>

  @@include('../layouts/footer-block.html') <!-- Footer block -->

  <script src="https://cdnjs.cloudflare.com/ajax/libs/apexcharts/3.19.3/apexcharts.min.js"></script>
  <script>
    // Burnout Levels by Department
    var burnoutOptions = {
      series: [60, 70, 50, 40, 55],
      chart: { type: 'radialBar', height: 250 },
      labels: ['Engineering', 'Sales', 'Marketing', 'HR', 'IT'],
      colors: ['#dc3545', '#ffc107', '#007bff', '#28a745', '#6c757d']
    };
    new ApexCharts(document.querySelector("#burnout-level-chart"), burnoutOptions).render();

    // Feedback Response Rate by Department
    var feedbackOptions = {
      series: [{ name: 'Response Rate', data: [45, 38, 50, 65, 80] }],
      chart: { type: 'bar', height: 250 },
      xaxis: { categories: ['Marketing', 'HR', 'Sales', 'IT', 'Engineering'] },
      colors: ['#ffc107']
    };
    new ApexCharts(document.querySelector("#feedback-response-chart"), feedbackOptions).render();

    // Stress Levels in Sales
    var stressSalesOptions = {
      series: [{ name: 'Stress Level', data: [70, 75, 80, 65, 85] }],
      chart: { type: 'line', height: 250 },
      xaxis: { categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May'] },
      colors: ['#dc3545'],
      stroke: { width: 2, curve: 'smooth' },
    };
    new ApexCharts(document.querySelector("#stress-sales-chart"), stressSalesOptions).render();

    // Collaboration in Marketing
    var collaborationMarketingOptions = {
      series: [{ name: 'Collaboration', data: [50, 60, 45, 55, 65] }],
      chart: { type: 'bar', height: 250 },
      xaxis: { categories: ['Project A', 'Project B', 'Campaign 1', 'Campaign 2', 'Ad Strategy'] },
      colors: ['#28a745']
    };
    new ApexCharts(document.querySelector("#collaboration-marketing-chart"), collaborationMarketingOptions).render();
  </script>

  <script>
    // Filter functionality and pagination handling (to be implemented)
    document.getElementById('department-filter').addEventListener('change', filterIssues);
    document.getElementById('issue-type-filter').addEventListener('change', filterIssues);
    document.getElementById('search').addEventListener('input', filterIssues);

    function filterIssues() {
      // Apply filters to display the relevant issues based on selected department, issue type, or search term.
      // Pagination functionality can be handled by slicing the list of issues for each page.
    }
  </script>

</body>
<!-- [Body] end -->
</html>
