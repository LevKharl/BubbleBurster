<!DOCTYPE html>
<html lang="en">
<!-- [Head] start -->
<head>
  @@include('../layouts/head-page-meta.html', {'title': 'Home'})
  <link rel="stylesheet" href="../assets/css/plugins/jsvectormap.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/apexcharts/3.19.3/apexcharts.min.css">
  @@include('../layouts/head-css.html')
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
    .bg-grd-primary {
      background: linear-gradient(135deg, #007bff, #0056b3);
    }
    .bg-grd-success {
      background: linear-gradient(135deg, #28a745, #218838);
    }
    .bg-grd-warning {
      background: linear-gradient(135deg, #ffc107, #e0a800);
    }
    .bg-grd-danger {
      background: linear-gradient(135deg, #dc3545, #c82333);
    }
    .order-card h6 {
      font-size: 16px;
    }
    .order-card h2 span {
      font-size: 24px;
    }
    .order-card i {
      font-size: 30px;
    }
  </style>
</head>
<!-- [Head] end -->
<!-- [Body] Start -->

<body @@bodySetup>
  @@include('../layouts/layout-vertical.html')

  
<!-- npm install bubbly-bg -->
<!-- npm install bubbly-bg -->
  <script src="https://cdn.jsdelivr.net/npm/bubbly-bg@1.0.0/dist/bubbly-bg.js"></script>
  <script>bubbly({
    colorStart: "#ffffff",
    colorStop: "#bed9f8",
    canvas: document.querySelector("#background"), // default is created and attached automatically
    compose: "lighter", // default is "lighter"
    animate: true, // default is true
    bubbles: Math.random() * 100, // default is Math.floor((canvas.width + canvas.height) * 0.02);
    shadowColor: "#a1c6d1", // default is #fff
    shadowBlur: 1, // default is 4
    fillFunc: () => `hsla(${Math.random() * 360}, 100%, 50%, ${Math.random() * 0.25})`, // default is () => `hsla(0, 0%, 100%, ${r() * 0.1})`)
    angleFunc: () => Math.random() * Math.PI * 2, // default is this
    velocityFunc: () => 1.5 + Math.random() * 1.5, // default is this
    radiusFunc: () => 9 + Math.random() * 25 // default is 4 + Math.random() * width / 25
  });
  </script>
<!-- npm install bubbly-bg -->
<!-- npm install bubbly-bg -->
  
  <!-- [ Main Content ] start -->
  <div class="pc-container">
    <div class="pc-content">
      <!-- [ Main Content ] start -->

      <!-- Row 1: Overall Mood, Overall Health, Feedback Response Rate -->
      <div class="row">
        <div class="col-md-4">
          <div class="card">
            <div class="card-header">
              <h5>Overall Mood</h5>
            </div>
            <div class="card-body">
              <div id="mood-thermometer" style="height: 200px;"></div>
            </div>
          </div>
        </div>

        <div class="col-md-4">
          <div class="card">
            <div class="card-header">
              <h5>Overall Health</h5>
            </div>
            <div class="card-body">
              <div id="health-gauge" style="height: 200px;"></div>
            </div>
          </div>
        </div>

        <div class="col-md-4">
          <div class="card">
            <div class="card-header">
              <h5>Feedback Response Rate</h5>
            </div>
            <div class="card-body">
              <div id="feedback-rate-chart" style="height: 200px;"></div>
            </div>
          </div>
        </div>
      </div>

      <!-- Row 2: Employee Satisfaction Over Time, Inter-Departmental Collaboration -->
      <div class="row">
        <div class="col-md-6">
          <div class="card">
            <div class="card-header">
              <h5>Employee Satisfaction Over Time</h5>
            </div>
            <div class="card-body">
              <div id="satisfaction-chart" style="height: 250px;"></div>
            </div>
          </div>
        </div>

        <div class="col-md-6">
          <div class="card">
            <div class="card-header">
              <h5>Inter-Departmental Collaboration</h5>
            </div>
            <div class="card-body">
              <div id="collaboration-chart" style="height: 250px;"></div>
            </div>
          </div>
        </div>
      </div>

      <!-- Row 3: Burnout Levels by Department, Feedback Response Rate by Department -->
      <div class="row">

        <div class="col-md-6">
          <div class="card">
            <div class="card-header">
              <h5>Feedback Response Rate by Department</h5>
            </div>
            <div class="card-body">
              <div id="feedback-response-chart" style="height: 250px;"></div>
            </div>
          </div>
        </div>
      
        <div class="col-md-6">
          <div class="card">
            <div class="card-header">
              <h5>Burnout Levels by Department</h5>
            </div>
            <div class="card-body">
              <div id="burnout-level-chart" style="height: 250px;"></div>
            </div>
          </div>
        </div>
      </div>

      <!-- Row 4: Department Well-being Cards -->
      <div class="row">
        <div class="col-md-3">
          <div class="card bg-grd-primary order-card">
            <div class="card-body text-center">
              <h6 class="text-white">IT Well-being</h6>
              <h2 class="text-end text-white">
                <i class="feather icon-settings float-start"></i>
                <span>85%</span>
              </h2>
              <p class="m-b-0">Performance<span class="float-end">82%</span></p>
              <a href="engineering.html" class="btn btn-light w-100 mt-3">View Details</a>
            </div>
          </div>
        </div>

        <div class="col-md-3">
          <div class="card bg-grd-success order-card">
            <div class="card-body text-center">
              <h6 class="text-white">Marketing Well-being</h6>
              <h2 class="text-end text-white">
                <i class="feather icon-trending-up float-start"></i>
                <span>90%</span>
              </h2>
              <p class="m-b-0">Campaign Success<span class="float-end">88%</span></p>
              <a href="marketing.html" class="btn btn-light w-100 mt-3">View Details</a>
            </div>
          </div>
        </div>

        <div class="col-md-3">
          <div class="card bg-grd-warning order-card">
            <div class="card-body text-center">
              <h6 class="text-white">HR Well-being</h6>
              <h2 class="text-end text-white">
                <i class="feather icon-users float-start"></i>
                <span>88%</span>
              </h2>
              <p class="m-b-0">Employee Morale<span class="float-end">85%</span></p>
              <a href="hr.html" class="btn btn-light w-100 mt-3">View Details</a>
            </div>
          </div>
        </div>

        <div class="col-md-3">
          <div class="card bg-grd-danger order-card">
            <div class="card-body text-center">
              <h6 class="text-white">Sales Well-being</h6>
              <h2 class="text-end text-white">
                <i class="feather icon-dollar-sign float-start"></i>
                <span>92%</span>
              </h2>
              <p class="m-b-0">Satisfaction Rate<span class="float-end">89%</span></p>
              <a href="sales.html" class="btn btn-light w-100 mt-3">View Details</a>
            </div>
          </div>
        </div>
      </div>
      <!-- [ Main Content ] end -->
    </div>
  </div>
  <!-- [ Main Content ] end -->
  @@include('../layouts/footer-block.html') 

  <!-- Include App.js -->
  <script src="./app.js"></script>

  <!-- [Page Specific JS] start -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/apexcharts/3.19.3/apexcharts.min.js"></script>
  <script>
    // Thermometer Graph for Overall Mood
    var moodOptions = {
      series: [75],
      chart: { height: 200, type: 'radialBar' },
      plotOptions: { radialBar: { hollow: { size: '70%' } } },
      labels: ['Mood Level'],
      colors: ['#28a745']
    };
    new ApexCharts(document.querySelector("#mood-thermometer"), moodOptions).render();

    // Gauge Chart for Overall Health
    var healthOptions = {
      series: [58],
      chart: { type: 'radialBar', height: 200 },
      plotOptions: { radialBar: { startAngle: -135, endAngle: 135, hollow: { size: '70%' } } },
      labels: ['Health Level']
    };
    new ApexCharts(document.querySelector("#health-gauge"), healthOptions).render();

    // Feedback Response Rate
    var feedbackOptions = {
      series: [85],
      chart: { type: 'radialBar', height: 200 },
      plotOptions: { radialBar: { hollow: { size: '70%' } } },
      labels: ['Response Rate'],
      colors: ['#ffc107']
    };
    new ApexCharts(document.querySelector("#feedback-rate-chart"), feedbackOptions).render();

    // Employee Satisfaction Over Time
    var satisfactionOptions = {
      series: [{ name: 'Satisfaction', data: [65, 70, 75, 72, 78, 80, 85] }],
      chart: { type: 'line', height: 250 },
      xaxis: { categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul'] },
      colors: ['#007bff']
    };
    new ApexCharts(document.querySelector("#satisfaction-chart"), satisfactionOptions).render();

    // Inter-Departmental Collaboration
    var collaborationOptions = {
      series: [{ name: 'Collaboration', data: [30, 40, 45, 50, 60, 70] }],
      chart: { type: 'bar', height: 250 },
      xaxis: { categories: ['Mkt', 'HR', 'Sales', 'Ops', 'IT'] },
      colors: ['#28a745']
    };
    new ApexCharts(document.querySelector("#collaboration-chart"), collaborationOptions).render();

    // Feedback Response Rate by Department Chart
    var feedbackDepartmentOptions = {
      series: [{ name: 'Response Rate', data: [45, 38, 50, 65, 80] }],
      chart: { type: 'bar', height: 250 },
      xaxis: { categories: ['Marketing', 'HR', 'Sales', 'IT', 'Engineering'] },
      colors: ['#ffc107']
    };
    new ApexCharts(document.querySelector("#feedback-response-chart"), feedbackDepartmentOptions).render();

    // Burnout Levels by Department Chart
    var burnoutOptions = {
      series: [60, 70, 50, 40, 55],
      chart: { type: 'radialBar', height: 250 },
      labels: ['Engineering', 'Sales', 'Marketing', 'HR', 'IT'],
      colors: ['#dc3545', '#ffc107', '#007bff', '#28a745', '#6c757d']
    };
    new ApexCharts(document.querySelector("#burnout-level-chart"), burnoutOptions).render();

    // Expanded WHO-based categories
    const initialCategories = {
        underused_skills: { name: "Under-use of Skills", positiveFeedback: 0, negativeFeedback: 0, ranking: 0 },
        excessive_workload: { name: "Excessive Workload", positiveFeedback: 0, negativeFeedback: 0, ranking: 0 },
        long_hours: { name: "Long, Unsocial or Inflexible Hours", positiveFeedback: 0, negativeFeedback: 0, ranking: 0 },
        lack_of_control: { name: "Lack of Control Over Job Design", positiveFeedback: 0, negativeFeedback: 0, ranking: 0 },
        unsafe_conditions: { name: "Unsafe or Poor Physical Conditions", positiveFeedback: 0, negativeFeedback: 0, ranking: 0 },
        negative_culture: { name: "Negative Organizational Culture", positiveFeedback: 0, negativeFeedback: 0, ranking: 0 },
        limited_support: { name: "Limited Support from Colleagues", positiveFeedback: 0, negativeFeedback: 0, ranking: 0 },
        violence_harassment: { name: "Violence, Harassment, or Bullying", positiveFeedback: 0, negativeFeedback: 0, ranking: 0 },
        discrimination: { name: "Discrimination and Exclusion", positiveFeedback: 0, negativeFeedback: 0, ranking: 0 },
        unclear_role: { name: "Unclear Job Role", positiveFeedback: 0, negativeFeedback: 0, ranking: 0 },
        under_promotion: { name: "Under- or Over-promotion", positiveFeedback: 0, negativeFeedback: 0, ranking: 0 },
        job_insecurity: { name: "Job Insecurity or Inadequate Pay", positiveFeedback: 0, negativeFeedback: 0, ranking: 0 },
        work_home_conflict: { name: "Conflicting Home/Work Demands", positiveFeedback: 0, negativeFeedback: 0, ranking: 0 }
    };

    if (!localStorage.getItem("categories")) localStorage.setItem("categories", JSON.stringify(initialCategories));
    if (!localStorage.getItem("issues")) localStorage.setItem("issues", JSON.stringify([]));
    if (!localStorage.getItem("progressTracker")) localStorage.setItem("progressTracker", JSON.stringify([]));
    if (!localStorage.getItem("visibilitySettings")) localStorage.setItem("visibilitySettings", JSON.stringify({ visibilityOption: "company-wide" }));

    // Populate categories in the feedback form
    const categorySelect = document.getElementById("feedback-category");
    Object.keys(initialCategories).forEach(categoryKey => {
        const option = document.createElement("option");
        option.value = categoryKey;
        option.textContent = initialCategories[categoryKey].name;
        categorySelect.appendChild(option);
    });
  </script>
</body>
<!-- [Body] end -->
</html>
